{"ast":null,"code":"import _objectSpread from \"D:\\\\Udacity\\\\React nanodegree\\\\React & Redux\\\\react-and-redux-final-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"D:\\\\Udacity\\\\React nanodegree\\\\React & Redux\\\\react-and-redux-final-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Udacity\\\\React nanodegree\\\\React & Redux\\\\react-and-redux-final-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\Udacity\\\\React nanodegree\\\\React & Redux\\\\react-and-redux-final-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\Udacity\\\\React nanodegree\\\\React & Redux\\\\react-and-redux-final-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\Udacity\\\\React nanodegree\\\\React & Redux\\\\react-and-redux-final-project\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\Udacity\\\\React nanodegree\\\\React & Redux\\\\react-and-redux-final-project\\\\src\\\\components\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setAuthedUser, clearAuthedUser } from '../actions/authedUser';\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      userId: null,\n      toHome: false\n    };\n\n    _this.handleSelectionChanged = function (event) {\n      var userId = event.target.value;\n      this.setState(function (previousState) {\n        return _objectSpread({}, previousState, {\n          userId: userId\n        });\n      });\n    };\n\n    _this.handleLogin = function (event) {\n      var userId = this.state.userId;\n      var dispatch = this.props.dispatch;\n      dispatch(setAuthedUser(userId));\n      this.setState(function (previousState) {\n        return _objectSpread({}, previousState, {\n          toHome: true\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.dispatch(clearAuthedUser());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // const { userId, toHome } = this.state\n      var _this$state = this.state,\n          userId = _this$state.userId,\n          toHome = _this$state.toHome;\n      var _this$props = this.props,\n          history = _this$props.history,\n          users = _this$props.users;\n      var selected = userId ? userId : -1;\n      var avatar = userId ? users[userId].avatarURL : 'placeholder.jpg';\n\n      if (toHome) {\n        var redirect = history.location.state;\n\n        if (redirect != null) {\n          return React.createElement(Redirect, {\n            to: redirect,\n            push: true,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 52\n            },\n            __self: this\n          });\n        }\n\n        return React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"div\", {\n        className: \"login-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"Please select a user and press the login button.\"), React.createElement(\"div\", {\n        className: \"user-select\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: avatar,\n        alt: \"Avatar of \".concat(userId),\n        className: \"avatar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }), React.createElement(\"select\", {\n        value: selected,\n        onChange: function onChange(event) {\n          return _this2.handleSelectionChanged(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: -1,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Select user...\"), Object.keys(users).map(function (key) {\n        return React.createElement(\"option\", {\n          value: users[key].id,\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, users[key].id);\n      }))), React.createElement(\"button\", {\n        className: \"btn\",\n        disabled: userId === null,\n        onClick: function onClick(event) {\n          return _this2.handleLogin(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \"Login\")));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nfunction mapStateToProps(_ref) {\n  var users = _ref.users;\n  return {\n    users: users\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(Login));","map":{"version":3,"sources":["D:\\Udacity\\React nanodegree\\React & Redux\\react-and-redux-final-project\\src\\components\\Login.js"],"names":["React","Component","Redirect","withRouter","connect","setAuthedUser","clearAuthedUser","Login","state","userId","toHome","handleSelectionChanged","event","target","value","setState","previousState","handleLogin","dispatch","props","history","users","selected","avatar","avatarURL","redirect","location","Object","keys","map","key","id","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Redirect, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setAuthedUser, clearAuthedUser } from '../actions/authedUser';\n\nclass Login extends Component {\n  state = {\n    userId: null,\n    toHome: false,\n  }\n\n  handleSelectionChanged = function(event) {\n    const userId = event.target.value;\n\n    this.setState(function(previousState) {\n      return {\n        ...previousState,\n        userId,\n      };\n    });\n  }\n\n  handleLogin = function(event) {\n    const { userId } = this.state;\n    const { dispatch } = this.props;\n\n    dispatch(setAuthedUser(userId));\n\n    this.setState(function(previousState) {\n      return {\n        ...previousState,\n        toHome: true,\n      };\n    });\n  }\n\n  componentDidMount() {\n    this.props.dispatch(clearAuthedUser())\n  }\n\n  render() {\n    // const { userId, toHome } = this.state\n    const { userId, toHome } = this.state;\n    const { history, users } = this.props;\n    const selected = userId ? userId : -1;\n    const avatar = userId ? users[userId].avatarURL : 'placeholder.jpg';\n\n\n    if(toHome) {\n      const redirect = history.location.state;\n      if (redirect != null) {\n        return <Redirect to={redirect} push={true} />\n      }\n      return <Redirect to='/' />\n    }\n\n    return (\n      <div>\n        <h3 className='center'>Login</h3>\n        <div className='login-box'>\n          <span>Please select a user and press the login button.</span>\n          <div className='user-select'>\n           <img\n              src={avatar}\n              alt={`Avatar of ${userId}`}\n              className='avatar'\n            />\n            <select value={selected} onChange={(event) => this.handleSelectionChanged(event)}>\n              <option value={-1} disabled>Select user...</option>\n              {Object.keys(users).map(function(key) {\n                return (\n                  <option value={users[key].id} key={key}>{users[key].id}</option>\n                );\n              })}\n            </select>\n          </div>\n          <button\n            className='btn'\n            disabled={userId === null}\n            onClick={(event) => this.handleLogin(event)}\n          >\n            Login\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps({ users }) {\n  return {\n    users,\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(Login))\n\n\n"]},"metadata":{},"sourceType":"module"}